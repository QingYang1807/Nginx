<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº¤äº’å¼ Nginx æ‰‹å†Œ (é«˜çº§ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Slate, Stone, Teal) -->
    <!-- Application Structure Plan: é‡‡ç”¨â€œå¼•å¯¼å¼å­¦ä¹ ä¸å¿«é€Ÿå‚è€ƒâ€æ¨¡å‹ã€‚å·¦ä¾§æ˜¯å›ºå®šçš„ã€æŒ‰ä»»åŠ¡å’Œæ¦‚å¿µåˆ†ç»„çš„å¯¼èˆªæ ï¼ˆå…¥é—¨ã€æ ¸å¿ƒé…ç½®ã€æ ¸å¿ƒåŠŸèƒ½ã€é«˜çº§ä¸»é¢˜ã€é€ŸæŸ¥è¡¨ï¼‰ï¼Œå³ä¾§æ˜¯åŠ¨æ€å†…å®¹åŒºã€‚è¿™ç§ç»“æ„å…è®¸ç”¨æˆ·æŒ‰å­¦ä¹ è·¯å¾„æ¢ç´¢ï¼Œæˆ–ç›´æ¥è·³è½¬åˆ°ç‰¹å®šä¸»é¢˜ã€‚é€šè¿‡å°†çº¿æ€§æ–‡æ¡£é‡æ„ä¸ºéçº¿æ€§çš„ã€åŸºäºä»»åŠ¡çš„ç»“æ„ï¼Œæå¤§åœ°æé«˜äº†ä¿¡æ¯çš„å¯å‘ç°æ€§å’Œæ˜“ç”¨æ€§ã€‚ -->
    <!-- Visualization & Content Choices: 1. Nginx vs Apacheï¼šä½¿ç”¨æ¸…æ™°çš„HTMLè¡¨æ ¼è¿›è¡Œå¯¹æ¯”ï¼Œç›´è§‚æ˜“æ‡‚ã€‚2. å®‰è£…æŒ‡å—ï¼šä½¿ç”¨æ ‡ç­¾é¡µï¼ˆTabsï¼‰åˆ†ç¦»ä¸åŒå¹³å°çš„å®‰è£…æ­¥éª¤ï¼Œé¿å…ä¿¡æ¯æ··æ‚ã€‚3. é…ç½®ç»“æ„ï¼šç”¨HTML/CSSæ„å»ºå¯äº¤äº’çš„é…ç½®æ–‡â€‹â€‹ä»¶ç»“æ„å›¾ï¼Œç‚¹å‡»ä¸åŒéƒ¨åˆ†ï¼ˆhttp, server, locationï¼‰å¯æ˜¾ç¤ºç›¸å…³æŒ‡ä»¤è¯´æ˜ï¼Œå°†æŠ½è±¡çš„å±‚çº§å…³ç³»å¯è§†åŒ–ã€‚4. è´Ÿè½½å‡è¡¡ç®—æ³•ï¼šä½¿ç”¨Chart.jsåŠ¨æ€æ¡å½¢å›¾æ¨¡æ‹Ÿè¯·æ±‚åˆ†å‘ï¼Œç”¨æˆ·ç‚¹å‡»æŒ‰é’®å¯çœ‹åˆ°ä¸åŒç®—æ³•ï¼ˆè½®è¯¢ã€æœ€å°‘è¿æ¥ã€IPå“ˆå¸Œï¼‰ä¸‹æœåŠ¡å™¨è´Ÿè½½çš„å®æ—¶å˜åŒ–ï¼Œå°†ç®—æ³•è¡Œä¸ºåŠ¨æ€åŒ–ï¼Œè¿™æ˜¯â€œWOWâ€å› ç´ çš„å…³é”®ã€‚5. æ€§èƒ½è®¡ç®—å™¨ï¼šé€šè¿‡ç®€å•çš„JSè¾“å…¥å’Œè¾“å‡ºï¼Œå°†å…¬å¼ï¼ˆå¦‚æœ€å¤§è¿æ¥æ•°ï¼‰å…·è±¡åŒ–ã€‚æ‰€æœ‰é€‰æ‹©éƒ½æ—¨åœ¨ç”¨äº’åŠ¨å’Œè§†è§‰åŒ–å…ƒç´ å–ä»£é™æ€æ–‡æœ¬ï¼Œæå‡å­¦ä¹ ä½“éªŒã€‚ -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 40vh;
        }
        .nav-link {
            display: block;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            transition: background-color 0.2s, color 0.2s;
            color: #cbd5e1; /* slate-300 */
        }
        .nav-link:hover {
            background-color: #334155; /* slate-700 */
            color: #ffffff;
        }
        .nav-link.active {
            background-color: #0d9488; /* teal-600 */
            color: #ffffff;
            font-weight: 600;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .code-block {
            background-color: #1e293b; /* slate-800 */
            color: #e2e8f0; /* slate-200 */
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #475569; /* slate-600 */
            color: white;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            cursor: pointer;
            font-size: 0.8rem;
        }
        .copy-btn:hover {
            background-color: #64748b; /* slate-500 */
        }
        .tab {
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-bottom: 2px solid transparent;
        }
        .tab.active {
            border-color: #0d9488; /* teal-600 */
            color: #0d9488;
            font-weight: 600;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .troubleshooting-card {
            background-color: white;
            border-left: 4px solid;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .border-red-500 { border-color: #ef4444; }
        .text-red-700 { color: #b91c1c; }
        .border-amber-500 { border-color: #f59e0b; }
        .text-amber-700 { color: #b45309; }
        .border-sky-500 { border-color: #0ea5e9; }
        .text-sky-700 { color: #0369a1; }

    </style>
</head>
<body class="text-slate-800">

    <div class="flex h-screen bg-slate-50">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-slate-800 text-slate-200 p-4 space-y-4 overflow-y-auto">
            <div class="text-white text-2xl font-bold text-center py-2">
                Nginx æ‰‹å†Œ
            </div>
            <nav class="space-y-4">
                <div>
                    <h3 class="px-4 text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2">å…¥é—¨</h3>
                    <a href="#intro" class="nav-link active">ğŸš€ ç®€ä»‹ä¸æ ¸å¿ƒç‰¹æ€§</a>
                    <a href="#install" class="nav-link">ğŸ“¦ å®‰è£…æŒ‡å—</a>
                </div>
                <div>
                    <h3 class="px-4 text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2">æ·±å…¥ç†è§£</h3>
                    <a href="#worker-model" class="nav-link">âš™ï¸ å·¥ä½œæ¨¡å‹</a>
                </div>
                <div>
                    <h3 class="mt-4 px-4 text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2">æ ¸å¿ƒé…ç½®</h3>
                    <a href="#config-structure" class="nav-link">ğŸ—ï¸ é…ç½®æ–‡ä»¶ç»“æ„</a>
                    <a href="#static-content" class="nav-link">ğŸ–¼ï¸ é™æ€å†…å®¹æœåŠ¡</a>
                </div>
                <div>
                    <h3 class="mt-4 px-4 text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2">æ ¸å¿ƒåŠŸèƒ½</h3>
                    <a href="#reverse-proxy" class="nav-link">ğŸ“¡ åå‘ä»£ç†</a>
                    <a href="#load-balancing" class="nav-link">âš–ï¸ è´Ÿè½½å‡è¡¡</a>
                </div>
                <div>
                    <h3 class="mt-4 px-4 text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2">é«˜çº§ä¸»é¢˜</h3>
                    <a href="#performance" class="nav-link">âš¡ æ€§èƒ½ä¼˜åŒ–</a>
                    <a href="#security" class="nav-link">ğŸ›¡ï¸ å®‰å…¨åŠ å›º</a>
                    <a href="#caching" class="nav-link">ğŸ—„ï¸ å†…å®¹ç¼“å­˜</a>
                    <a href="#rewriting" class="nav-link">ğŸ”„ URL é‡å†™</a>
                </div>
                <div>
                    <h3 class="mt-4 px-4 text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2">æ’é”™ä¸ç»´æŠ¤</h3>
                    <a href="#troubleshooting" class="nav-link">ğŸ©º å¸¸è§é”™è¯¯æ’æŸ¥</a>
                </div>
                <div>
                    <h3 class="mt-4 px-4 text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2">å¿«é€Ÿå‚è€ƒ</h3>
                    <a href="#cheatsheet" class="nav-link">ğŸ“‹ å¸¸ç”¨æŒ‡ä»¤é€ŸæŸ¥</a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6 lg:p-10 overflow-y-auto">
            
            <!-- Section: Introduction -->
            <section id="intro" class="content-section active">
                <h1 class="text-4xl font-bold text-slate-900">Nginx: é«˜æ€§èƒ½ Web æœåŠ¡å™¨</h1>
                <p class="mt-4 text-lg text-slate-600">Nginx (å‘éŸ³ä¸º "engine-x") æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†æœåŠ¡å™¨ã€‚æœ¬äº¤äº’å¼æ‰‹å†Œå°†å¸®åŠ©æ‚¨ä»å…¥é—¨åˆ°ç²¾é€šï¼ŒæŒæ¡å…¶æ ¸å¿ƒæ¦‚å¿µä¸å®è·µã€‚</p>

                <div class="mt-10 grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-semibold text-teal-700">é«˜å¹¶å‘ä¸é«˜æ€§èƒ½</h3>
                        <p class="mt-2 text-slate-600">é‡‡ç”¨å¼‚æ­¥ã€äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œå•ä¸ªå·¥ä½œè¿›ç¨‹å¯å¤„ç†æ•°åƒå¹¶å‘è¿æ¥ï¼Œå†…å­˜å ç”¨æä½ã€‚</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-semibold text-teal-700">å¼ºå¤§çš„åå‘ä»£ç†</h3>
                        <p class="mt-2 text-slate-600">ä½œä¸ºåå‘ä»£ç†ï¼Œå¯å®ç°è´Ÿè½½å‡è¡¡ã€SSLç»ˆæ­¢ã€ç¼“å­˜é™æ€å†…å®¹ï¼Œæå‡åº”ç”¨å®‰å…¨æ€§å’Œå¯ä¼¸ç¼©æ€§ã€‚</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-semibold text-teal-700">çµæ´»çš„è´Ÿè½½å‡è¡¡</h3>
                        <p class="mt-2 text-slate-600">æ”¯æŒè½®è¯¢ã€æœ€å°‘è¿æ¥ã€IPå“ˆå¸Œç­‰å¤šç§ç®—æ³•ï¼Œæœ‰æ•ˆåˆ†å‘æµé‡è‡³åç«¯æœåŠ¡å™¨é›†ç¾¤ã€‚</p>
                    </div>
                </div>

                <h2 class="text-3xl font-bold text-slate-900 mt-12 mb-6">Nginx vs. Apache</h2>
                <div class="overflow-x-auto bg-white rounded-lg shadow-sm">
                    <table class="w-full text-left">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="p-4 font-semibold">ç‰¹æ€§</th>
                                <th class="p-4 font-semibold">Nginx</th>
                                <th class="p-4 font-semibold">Apache</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-200">
                            <tr>
                                <td class="p-4 font-medium">æ¶æ„æ¨¡å‹</td>
                                <td class="p-4">äº‹ä»¶é©±åŠ¨ï¼Œå¼‚æ­¥éé˜»å¡</td>
                                <td class="p-4">è¿›ç¨‹é©±åŠ¨/çº¿ç¨‹é©±åŠ¨</td>
                            </tr>
                            <tr>
                                <td class="p-4 font-medium">å¹¶å‘å¤„ç†</td>
                                <td class="p-4 text-green-600 font-semibold">éå¸¸é«˜ï¼Œèµ„æºæ¶ˆè€—ä½</td>
                                <td class="p-4">è‰¯å¥½ï¼Œé«˜å¹¶å‘ä¸‹èµ„æºæ¶ˆè€—é«˜</td>
                            </tr>
                            <tr>
                                <td class="p-4 font-medium">é™æ€å†…å®¹</td>
                                <td class="p-4 text-green-600 font-semibold">æ€§èƒ½æé«˜</td>
                                <td class="p-4">è‰¯å¥½</td>
                            </tr>
                             <tr>
                                <td class="p-4 font-medium">åŠ¨æ€å†…å®¹</td>
                                <td class="p-4">é€šè¿‡FastCGIç­‰ä»£ç†ç»™åç«¯å¤„ç†</td>
                                <td class="p-4">å¯å†…åµŒæ¨¡å— (mod_php) ç›´æ¥å¤„ç†</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section: Installation -->
            <section id="install" class="content-section">
                 <h1 class="text-4xl font-bold text-slate-900">å®‰è£…æŒ‡å—</h1>
                <p class="mt-4 text-lg text-slate-600">æ ¹æ®æ‚¨çš„æ“ä½œç³»ç»Ÿå¹³å°ï¼Œé€‰æ‹©å¯¹åº”çš„å®‰è£…æ–¹å¼ã€‚æˆ‘ä»¬æ¨èä½¿ç”¨å®˜æ–¹æºæˆ–ç¨³å®šå¯é çš„è½¯ä»¶ä»“åº“è¿›è¡Œå®‰è£…ã€‚</p>
                
                <div class="mt-8 bg-white p-6 rounded-lg shadow-sm">
                    <div id="install-tabs" class="flex border-b border-slate-200 mb-6">
                        <div class="tab active" data-target="ubuntu">Ubuntu</div>
                        <div class="tab" data-target="centos">CentOS</div>
                        <div class="tab" data-target="docker">Docker</div>
                        <div class="tab" data-target="wsl">WSL</div>
                    </div>

                    <div id="ubuntu" class="tab-content active">
                        <h3 class="text-2xl font-semibold mb-4">åœ¨ Ubuntu ä¸Šå®‰è£…</h3>
                        <p class="mb-4">ä½¿ç”¨ `apt` åŒ…ç®¡ç†å™¨æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ã€‚</p>
                        <h4 class="font-semibold mb-2">1. æ›´æ–°åŒ…åˆ—è¡¨å¹¶å®‰è£… Nginx:</h4>
                        <div class="code-block" id="code-ubuntu-install">
                            <button class="copy-btn" onclick="copyToClipboard('code-ubuntu-install')">å¤åˆ¶</button>
                            <pre><code>sudo apt update
sudo apt install nginx</code></pre>
                        </div>
                        <h4 class="font-semibold mt-6 mb-2">2. é…ç½®é˜²ç«å¢™ (UFW):</h4>
                         <div class="code-block" id="code-ubuntu-fw">
                             <button class="copy-btn" onclick="copyToClipboard('code-ubuntu-fw')">å¤åˆ¶</button>
                            <pre><code>sudo ufw allow 'Nginx Full'
sudo ufw enable</code></pre>
                        </div>
                    </div>

                    <div id="centos" class="tab-content">
                        <h3 class="text-2xl font-semibold mb-4">åœ¨ CentOS ä¸Šå®‰è£…</h3>
                        <p class="mb-4">æ¨èä½¿ç”¨ EPEL ä»“åº“æˆ– Nginx å®˜æ–¹ä»“åº“ã€‚</p>
                        <h4 class="font-semibold mb-2">1. å®‰è£… EPEL å¹¶å®‰è£… Nginx:</h4>
                        <div class="code-block" id="code-centos-install">
                            <button class="copy-btn" onclick="copyToClipboard('code-centos-install')">å¤åˆ¶</button>
                            <pre><code>sudo yum install epel-release -y
sudo yum install nginx -y</code></pre>
                        </div>
                        <h4 class="font-semibold mt-6 mb-2">2. å¯åŠ¨æœåŠ¡å¹¶é…ç½®é˜²ç«å¢™:</h4>
                         <div class="code-block" id="code-centos-fw">
                            <button class="copy-btn" onclick="copyToClipboard('code-centos-fw')">å¤åˆ¶</button>
                            <pre><code>sudo systemctl start nginx
sudo systemctl enable nginx
sudo firewall-cmd --permanent --add-service=http --add-service=https
sudo firewall-cmd --reload</code></pre>
                        </div>
                    </div>

                    <div id="docker" class="tab-content">
                        <h3 class="text-2xl font-semibold mb-4">ä½¿ç”¨ Docker éƒ¨ç½²</h3>
                        <p class="mb-4">Docker æä¾›äº†è½»é‡ã€éš”ç¦»çš„éƒ¨ç½²ç¯å¢ƒã€‚</p>
                        <h4 class="font-semibold mb-2">1. è¿è¡Œä¸€ä¸ªç®€å•çš„ Nginx å®¹å™¨:</h4>
                        <div class="code-block" id="code-docker-run">
                            <button class="copy-btn" onclick="copyToClipboard('code-docker-run')">å¤åˆ¶</button>
                            <pre><code>docker run --name my-nginx -p 8080:80 -d nginx</code></pre>
                        </div>
                        <p class="mt-2 text-sm text-slate-500">æ­¤å‘½ä»¤ä¼šå°†ä¸»æœºçš„ 8080 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 80 ç«¯å£ã€‚</p>
                        <h4 class="font-semibold mt-6 mb-2">2. æŒ‚è½½è‡ªå®šä¹‰å†…å®¹å’Œé…ç½®:</h4>
                         <div class="code-block" id="code-docker-mount">
                            <button class="copy-btn" onclick="copyToClipboard('code-docker-mount')">å¤åˆ¶</button>
                            <pre><code>docker run --name my-custom-nginx -p 8080:80 -d \
  -v /path/to/your/content:/usr/share/nginx/html:ro \
  -v /path/to/your/conf.d:/etc/nginx/conf.d:ro \
  nginx</code></pre>
                        </div>
                    </div>

                    <div id="wsl" class="tab-content">
                        <h3 class="text-2xl font-semibold mb-4">åœ¨ WSL (Windows Subsystem for Linux) ä¸Šå®‰è£…</h3>
                        <p class="mb-4">å®‰è£…è¿‡ç¨‹ä¸åœ¨åŸç”Ÿ Linux å‘è¡Œç‰ˆ (å¦‚Ubuntu) ä¸ŠåŸºæœ¬ä¸€è‡´ã€‚</p>
                        <h4 class="font-semibold mb-2">1. åœ¨æ‚¨çš„ WSL (Ubuntu) ç»ˆç«¯ä¸­æ‰§è¡Œ:</h4>
                        <div class="code-block" id="code-wsl-install">
                            <button class="copy-btn" onclick="copyToClipboard('code-wsl-install')">å¤åˆ¶</button>
                            <pre><code>sudo apt update
sudo apt install nginx</code></pre>
                        </div>
                        <h4 class="font-semibold mt-6 mb-2">2. å¯åŠ¨æœåŠ¡:</h4>
                         <div class="code-block" id="code-wsl-start">
                            <button class="copy-btn" onclick="copyToClipboard('code-wsl-start')">å¤åˆ¶</button>
                            <pre><code>sudo service nginx start</code></pre>
                        </div>
                        <p class="mt-2 text-sm text-slate-500">WSL å¯èƒ½ä¸æ”¯æŒ `systemctl`ï¼Œè¯·ä½¿ç”¨ `service` å‘½ä»¤ã€‚å¯åŠ¨åï¼Œæ‚¨å¯ä»¥åœ¨ Windows æµè§ˆå™¨ä¸­é€šè¿‡ `http://localhost` è®¿é—®ã€‚</p>
                    </div>
                </div>
            </section>

            <!-- Section: Worker Model -->
            <section id="worker-model" class="content-section">
                <h1 class="text-4xl font-bold text-slate-900">Nginx å·¥ä½œæ¨¡å‹</h1>
                <p class="mt-4 text-lg text-slate-600">Nginx çš„é«˜æ€§èƒ½å½’åŠŸäºå…¶ç‹¬ç‰¹çš„ **Master-Worker** è¿›ç¨‹æ¨¡å‹å’Œ**äº‹ä»¶é©±åŠ¨**æ¶æ„ã€‚è¿™ä¸ªç»„åˆä½¿å…¶èƒ½ä»¥æä½çš„èµ„æºæ¶ˆè€—å¤„ç†æµ·é‡å¹¶å‘è¿æ¥ã€‚</p>
                
                <div class="mt-10 bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">Master-Worker è¿›ç¨‹æ¨¡å‹</h2>
                    <p class="mb-4">Nginx å¯åŠ¨åï¼Œä¼šåˆ›å»ºä¸€ä¸ª Master ä¸»è¿›ç¨‹å’Œæ•°ä¸ª Worker å·¥ä½œè¿›ç¨‹ã€‚</p>
                    <div class="flex flex-col md:flex-row gap-8">
                        <div class="md:w-1/2">
                            <h4 class="font-semibold text-xl text-sky-700 mb-2">Master è¿›ç¨‹</h4>
                             <ul class="list-disc list-inside space-y-2 text-slate-700">
                                <li>**ä¸å¤„ç†è¯·æ±‚**ï¼šåªè´Ÿè´£ç®¡ç† Worker è¿›ç¨‹ã€‚</li>
                                <li>**è¯»å–é…ç½®**ï¼šè§£æå¹¶éªŒè¯é…ç½®æ–‡ä»¶ã€‚</li>
                                <li>**ç»‘å®šç«¯å£**ï¼šæ‰§è¡Œéœ€è¦ root æƒé™çš„æ“ä½œï¼Œå¦‚ç»‘å®šåˆ° 80/443 ç«¯å£ã€‚</li>
                                <li>**ç®¡ç† Worker**ï¼šå¯åŠ¨ã€åœæ­¢ã€ç›‘æ§ Worker è¿›ç¨‹ï¼Œå¹¶åœ¨ Worker å¼‚å¸¸é€€å‡ºæ—¶é‡å¯å®ƒã€‚</li>
                                <li>**å¹³æ»‘é‡è½½**ï¼šæ¥æ”¶åˆ° `nginx -s reload` ä¿¡å·åï¼Œå¯åŠ¨å¸¦æœ‰æ–°é…ç½®çš„ Worker è¿›ç¨‹ï¼Œå¹¶é€šçŸ¥æ—§ Worker è¿›ç¨‹åœ¨å¤„ç†å®Œå½“å‰è¯·æ±‚åä¼˜é›…é€€å‡ºã€‚</li>
                            </ul>
                        </div>
                        <div class="md:w-1/2">
                             <h4 class="font-semibold text-xl text-teal-700 mb-2">Worker è¿›ç¨‹</h4>
                             <ul class="list-disc list-inside space-y-2 text-slate-700">
                                <li>**å¤„ç†æ‰€æœ‰è¯·æ±‚**ï¼šæ¯ä¸ª Worker éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å•çº¿ç¨‹è¿›ç¨‹ï¼Œè´Ÿè´£æ¥æ”¶ã€å¤„ç†å’Œå“åº”å®¢æˆ·ç«¯è¯·æ±‚ã€‚</li>
                                <li>**ä½æƒé™è¿è¡Œ**ï¼šä»¥ `nginx.conf` ä¸­æŒ‡å®šçš„éç‰¹æƒç”¨æˆ·ï¼ˆå¦‚ `www-data`ï¼‰èº«ä»½è¿è¡Œï¼Œå¢å¼ºå®‰å…¨æ€§ã€‚</li>
                                <li>**æ•°é‡é…ç½®**ï¼š`worker_processes` æŒ‡ä»¤é€šå¸¸è®¾ç½®ä¸ºæœåŠ¡å™¨çš„ CPU æ ¸å¿ƒæ•°ï¼Œä»¥å……åˆ†åˆ©ç”¨ç¡¬ä»¶ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>

                 <div class="mt-10 bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">äº‹ä»¶é©±åŠ¨æ¶æ„</h2>
                    <p class="mb-4">è¿™æ˜¯ Nginx é«˜å¹¶å‘èƒ½åŠ›çš„æ ¸å¿ƒã€‚ä¸ä¼ ç»Ÿâ€œä¸€ä¸ªè¿æ¥ä¸€ä¸ªè¿›ç¨‹/çº¿ç¨‹â€çš„æ¨¡å‹ä¸åŒï¼ŒNginx çš„å•ä¸ª Worker è¿›ç¨‹å¯ä»¥å¤„ç†æ•°åƒä¸ªè¿æ¥ã€‚</p>
                    <ul class="list-disc list-inside space-y-2 text-slate-700">
                        <li>**éé˜»å¡ I/O**ï¼šå½“ä¸€ä¸ªæ“ä½œï¼ˆå¦‚è¯»å†™ç½‘ç»œæ•°æ®ï¼‰éœ€è¦ç­‰å¾…æ—¶ï¼ŒWorker è¿›ç¨‹ä¸ä¼šè¢«é˜»å¡ã€‚å®ƒä¼šæ³¨å†Œä¸€ä¸ªäº‹ä»¶ï¼Œç„¶åç»§ç»­å¤„ç†å…¶ä»–å°±ç»ªçš„è¿æ¥ã€‚</li>
                        <li>**äº‹ä»¶é€šçŸ¥æœºåˆ¶**ï¼šä½¿ç”¨é«˜æ•ˆçš„ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ Linux ä¸Šçš„ `epoll`ï¼‰æ¥ç›‘å¬å¤§é‡è¿æ¥ä¸Šçš„äº‹ä»¶ï¼ˆæ–°è¿æ¥ã€æ•°æ®å¯è¯»ç­‰ï¼‰ã€‚</li>
                        <li>**èµ„æºé«˜æ•ˆ**ï¼šæå¤§åœ°å‡å°‘äº†å†…å­˜å ç”¨å’ŒCPUä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ï¼Œå› ä¸ºä¸éœ€è¦ä¸ºæ¯ä¸ªè¿æ¥ç»´æŠ¤ç‹¬ç«‹çš„è¿›ç¨‹æˆ–çº¿ç¨‹å †æ ˆã€‚</li>
                    </ul>
                </div>
            </section>
            
            <!-- Section: Config Structure -->
            <section id="config-structure" class="content-section">
                 <h1 class="text-4xl font-bold text-slate-900">é…ç½®æ–‡ä»¶ç»“æ„</h1>
                 <p class="mt-4 text-lg text-slate-600">Nginx çš„é…ç½®ç”±ä¸€ç³»åˆ—æŒ‡ä»¤å’Œå—ç»„æˆã€‚ç†è§£å…¶å±‚çº§ç»“æ„æ˜¯é…ç½®çš„å…³é”®ã€‚ç‚¹å‡»ä¸‹æ–¹å›¾ç¤ºçš„ä¸åŒåŒºå—æ¥æŸ¥çœ‹å…¶æ ¸å¿ƒæŒ‡ä»¤å’Œä½œç”¨ã€‚</p>
                 
                 <div class="mt-8 flex flex-col md:flex-row gap-6">
                    <!-- Interactive Diagram -->
                    <div class="md:w-1/2 lg:w-2/5">
                        <div id="config-diagram" class="bg-slate-800 p-4 rounded-lg text-white font-mono text-sm">
                            <div class="diagram-block" data-target="main-context">
                                <span class="text-purple-400">user</span> www-data;<br>
                                <span class="text-purple-400">worker_processes</span> auto;
                                <div class="diagram-block mt-2 diagram-clickable" data-target="events-context">
                                    <span class="text-yellow-400">events</span> {<br>
                                    <span class="pl-4 text-purple-400">worker_connections</span> 768;<br>
                                    }
                                </div>
                                <div class="diagram-block mt-2 diagram-clickable active" data-target="http-context">
                                    <span class="text-yellow-400">http</span> {<br>
                                    <div class="pl-4 diagram-block diagram-clickable" data-target="server-context">
                                        <span class="text-green-400">server</span> {<br>
                                        <span class="pl-8 text-blue-400">listen</span> 80;<br>
                                        <span class="pl-8 text-blue-400">server_name</span> example.com;<br>
                                        <div class="pl-8 diagram-block diagram-clickable" data-target="location-context">
                                            <span class="text-cyan-400">location</span> / {<br>
                                            <span class="pl-12 text-orange-400">root</span> /var/www/html;<br>
                                            <span class="pl-12 text-orange-400">try_files</span> $uri /index.html;<br>
                                            }<br>
                                        </div>
                                        }<br>
                                    </div>
                                    <span class="pl-4">...</span><br>
                                    }<br>
                                </div>
                            </div>
                        </div>
                        <style>
                        .diagram-block { border-left: 2px solid #475569; padding-left: 1rem; }
                        .diagram-clickable { cursor: pointer; transition: background-color 0.2s; border-left-color: #94a3b8; }
                        .diagram-clickable:hover { background-color: #334155; }
                        .diagram-clickable.active { background-color: #0d948830; border-left: 2px solid #0d9488; }
                        </style>
                    </div>

                    <!-- Info Panel -->
                    <div class="md:w-1/2 lg:w-3/5 bg-white p-6 rounded-lg shadow-sm">
                        <div id="main-context-info" class="config-info hidden">
                             <h3 class="text-2xl font-semibold mb-2 text-purple-600">Main/Global å—</h3>
                            <p class="mb-4">å®šä¹‰ Nginx çš„å…¨å±€æ ¸å¿ƒåŠŸèƒ½ï¼Œä½äºæ‰€æœ‰å—ä¹‹å¤–ã€‚</p>
                            <ul class="list-disc list-inside space-y-2 text-slate-700">
                                <li><code>user</code>: æŒ‡å®š Worker è¿›ç¨‹çš„è¿è¡Œç”¨æˆ·ã€‚</li>
                                <li><code>worker_processes</code>: Worker è¿›ç¨‹æ•°é‡ï¼Œé€šå¸¸ä¸º `auto` æˆ– CPU æ ¸å¿ƒæ•°ã€‚</li>
                                <li><code>error_log</code>: å…¨å±€é”™è¯¯æ—¥å¿—ã€‚</li>
                                <li><code>pid</code>: Master è¿›ç¨‹çš„ PID æ–‡ä»¶è·¯å¾„ã€‚</li>
                            </ul>
                        </div>
                        <div id="events-context-info" class="config-info hidden">
                            <h3 class="text-2xl font-semibold mb-2 text-yellow-500">events å—</h3>
                            <p class="mb-4">é…ç½® Nginx çš„ç½‘ç»œè¿æ¥å¤„ç†æœºåˆ¶ã€‚</p>
                            <ul class="list-disc list-inside space-y-2 text-slate-700">
                                <li><code>worker_connections</code>: æ¯ä¸ª Worker è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°ã€‚</li>
                                <li><code>use</code>: ä½¿ç”¨çš„äº‹ä»¶æ¨¡å‹ï¼Œå¦‚ `epoll`ã€‚</li>
                                <li><code>multi_accept</code>: å…è®¸ Worker ä¸€æ¬¡æ€§æ¥å—å¤šä¸ªæ–°è¿æ¥ã€‚</li>
                            </ul>
                        </div>
                        <div id="http-context-info" class="config-info">
                            <h3 class="text-2xl font-semibold mb-2 text-yellow-600">http å—</h3>
                            <p class="mb-4">å®šä¹‰HTTPæœåŠ¡å™¨çš„ä¸»è¦é…ç½®ï¼Œæ‰€æœ‰ `server` å—éƒ½ä½äºæ­¤å—å†…ã€‚</p>
                            <ul class="list-disc list-inside space-y-2 text-slate-700">
                                <li><code>include mime.types;</code>: åŒ…å«MIMEç±»å‹æ˜ å°„æ–‡ä»¶ã€‚</li>
                                <li><code>access_log</code>: è®¾ç½®è®¿é—®æ—¥å¿—çš„è·¯å¾„å’Œæ ¼å¼ã€‚</li>
                                <li><code>sendfile on;</code>: å¯ç”¨é«˜æ•ˆçš„æ–‡ä»¶ä¼ è¾“æ¨¡å¼ã€‚</li>
                                <li><code>keepalive_timeout</code>: è®¾ç½®é•¿è¿æ¥çš„è¶…æ—¶æ—¶é—´ã€‚</li>
                            </ul>
                        </div>
                         <div id="server-context-info" class="config-info hidden">
                            <h3 class="text-2xl font-semibold mb-2 text-green-600">server å—</h3>
                            <p class="mb-4">å®šä¹‰ä¸€ä¸ªè™šæ‹Ÿä¸»æœºï¼Œç”¨äºå¤„ç†ç‰¹å®šåŸŸåå’Œç«¯å£çš„è¯·æ±‚ã€‚</p>
                            <ul class="list-disc list-inside space-y-2 text-slate-700">
                                <li><code>listen</code>: æŒ‡å®šç›‘å¬çš„ç«¯å£å’ŒIPï¼Œå¦‚ `listen 80;` æˆ– `listen 443 ssl;`ã€‚</li>
                                <li><code>server_name</code>: æŒ‡å®šæ­¤è™šæ‹Ÿä¸»æœºå“åº”çš„åŸŸåï¼Œå¦‚ `example.com www.example.com`ã€‚</li>
                                <li><code>root</code>: å®šä¹‰è¯¥è™šæ‹Ÿä¸»æœºçš„æ–‡æ¡£æ ¹ç›®å½•ã€‚</li>
                                <li><code>index</code>: æŒ‡å®šç›®å½•çš„é»˜è®¤ç´¢å¼•æ–‡ä»¶ã€‚</li>
                            </ul>
                        </div>
                         <div id="location-context-info" class="config-info hidden">
                            <h3 class="text-2xl font-semibold mb-2 text-cyan-600">location å—</h3>
                            <p class="mb-4">æ ¹æ®è¯·æ±‚çš„URIåŒ¹é…å¹¶å®šä¹‰å¦‚ä½•å¤„ç†è¯·æ±‚ã€‚</p>
                            <ul class="list-disc list-inside space-y-2 text-slate-700">
                                <li><code>location /path/ {...}</code>: å‰ç¼€åŒ¹é…ã€‚</li>
                                <li><code>location ~ \.jpg$ {...}</code>: æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚</li>
                                <li><code>root</code> / <code>alias</code>: æŒ‡å®šæœåŠ¡è¯¥locationçš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ã€‚</li>
                                <li><code>proxy_pass</code>: å°†è¯·æ±‚è½¬å‘ç»™åç«¯æœåŠ¡å™¨ã€‚</li>
                                <li><code>try_files</code>: æŒ‰é¡ºåºæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¸¸ç”¨äºå•é¡µåº”ç”¨ã€‚</li>
                            </ul>
                        </div>
                    </div>
                 </div>
            </section>
            
            <!-- Section: Static Content -->
            <section id="static-content" class="content-section">
                 <h1 class="text-4xl font-bold text-slate-900">é™æ€å†…å®¹æœåŠ¡</h1>
                <p class="mt-4 text-lg text-slate-600">Nginx åœ¨æœåŠ¡é™æ€æ–‡ä»¶ï¼ˆå¦‚HTML, CSS, JS, å›¾ç‰‡ï¼‰æ–¹é¢æä¸ºé«˜æ•ˆã€‚æ ¸å¿ƒæŒ‡ä»¤æ˜¯ `root` å’Œ `alias`ã€‚</p>

                <div class="mt-8 grid md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-2xl font-semibold mb-4">`root` æŒ‡ä»¤</h3>
                        <p class="mb-4">å°†è¯·æ±‚çš„ URI é™„åŠ åˆ° `root` æŒ‡å®šçš„è·¯å¾„åï¼Œå½¢æˆå®Œæ•´çš„æ–‡ä»¶è·¯å¾„ã€‚</p>
                        <div class="code-block" id="code-root-example">
                             <button class="copy-btn" onclick="copyToClipboard('code-root-example')">å¤åˆ¶</button>
                            <pre><code>location /images/ {
    root /data/www;
}
# è¯·æ±‚ /images/cat.jpg
# -> æŸ¥æ‰¾ /data/www/images/cat.jpg</code></pre>
                        </div>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-2xl font-semibold mb-4">`alias` æŒ‡ä»¤</h3>
                        <p class="mb-4">ç”¨ `alias` æŒ‡å®šçš„è·¯å¾„æ›¿æ¢æ‰ `location` åŒ¹é…çš„URIéƒ¨åˆ†ã€‚</p>
                        <div class="code-block" id="code-alias-example">
                             <button class="copy-btn" onclick="copyToClipboard('code-alias-example')">å¤åˆ¶</button>
                            <pre><code>location /images/ {
    alias /data/assets/;
}
# è¯·æ±‚ /images/cat.jpg
# -> æŸ¥æ‰¾ /data/assets/cat.jpg</code></pre>
                        </div>
                    </div>
                </div>

                <h3 class="text-2xl font-semibold mt-10 mb-4">å•é¡µåº”ç”¨ (SPA) é…ç½®ç¤ºä¾‹</h3>
                <p class="mb-4">`try_files` æ˜¯é…ç½®Vueã€Reactç­‰å•é¡µåº”ç”¨çš„å…³é”®ï¼Œå®ƒå°†æ‰€æœ‰æ‰¾ä¸åˆ°æ–‡ä»¶çš„è¯·æ±‚éƒ½è½¬å‘ç»™ `index.html`ï¼Œäº¤ç”±å‰ç«¯è·¯ç”±å¤„ç†ã€‚</p>
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="code-block" id="code-spa-example">
                         <button class="copy-btn" onclick="copyToClipboard('code-spa-example')">å¤åˆ¶</button>
                        <pre><code>server {
    listen 80;
    server_name my-spa.com;
    root /var/www/my-spa/dist;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Section: Reverse Proxy -->
            <section id="reverse-proxy" class="content-section">
                <h1 class="text-4xl font-bold text-slate-900">åå‘ä»£ç†</h1>
                <p class="mt-4 text-lg text-slate-600">Nginx æœ€æ ¸å¿ƒçš„åŠŸèƒ½ä¹‹ä¸€ã€‚å®ƒæ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè½¬å‘ç»™åç«¯åº”ç”¨æœåŠ¡å™¨ï¼Œå¹¶å°†å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
                <h3 class="text-2xl font-semibold mt-10 mb-4">åŸºæœ¬é…ç½®</h3>
                <p class="mb-4">ä½¿ç”¨ `proxy_pass` å°†è¯·æ±‚ä»£ç†åˆ°åç«¯ã€‚åŒæ—¶ï¼Œä½¿ç”¨ `proxy_set_header` å°†å®¢æˆ·ç«¯çš„çœŸå®ä¿¡æ¯ï¼ˆå¦‚IPåœ°å€ã€Hostï¼‰ä¼ é€’ç»™åç«¯ã€‚</p>
                 <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="code-block" id="code-proxy-example">
                         <button class="copy-btn" onclick="copyToClipboard('code-proxy-example')">å¤åˆ¶</button>
                        <pre><code>location /api/ {
    proxy_pass http://127.0.0.1:3000;

    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}</code></pre>
                    </div>
                </div>

                <h3 class="text-2xl font-semibold mt-10 mb-4">ä»£ç† WebSocket</h3>
                <p class="mb-4">ä»£ç† WebSocket éœ€è¦æ­£ç¡®å¤„ç† `Upgrade` å’Œ `Connection` å¤´éƒ¨ï¼Œä»¥å®Œæˆåè®®å‡çº§ã€‚</p>
                 <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="code-block" id="code-ws-example">
                         <button class="copy-btn" onclick="copyToClipboard('code-ws-example')">å¤åˆ¶</button>
                        <pre><code>location /socket/ {
    proxy_pass http://backend_websocket_server;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
    proxy_read_timeout 86400s; # ä¿æŒé•¿è¿æ¥
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Section: Load Balancing -->
            <section id="load-balancing" class="content-section">
                 <h1 class="text-4xl font-bold text-slate-900">è´Ÿè½½å‡è¡¡</h1>
                <p class="mt-4 text-lg text-slate-600">é€šè¿‡ `upstream` æ¨¡å—å°†æµé‡åˆ†å‘åˆ°å¤šä¸ªåç«¯æœåŠ¡å™¨ï¼Œæé«˜åº”ç”¨çš„å¯ç”¨æ€§å’Œå¯ä¼¸ç¼©æ€§ã€‚ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼ŒæŸ¥çœ‹ä¸åŒç®—æ³•å¦‚ä½•åˆ†å‘10ä¸ªæ¨¡æ‹Ÿè¯·æ±‚ã€‚</p>

                <div class="mt-8 bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex items-center justify-center space-x-4 mb-6">
                        <button id="btn-round-robin" class="bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 transition">è½®è¯¢ (Round Robin)</button>
                        <button id="btn-least-conn" class="bg-sky-600 text-white px-4 py-2 rounded-md hover:bg-sky-700 transition">æœ€å°‘è¿æ¥ (Least Conn)</button>
                        <button id="btn-ip-hash" class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition">IP å“ˆå¸Œ (IP Hash)</button>
                    </div>
                    <div class="chart-container">
                        <canvas id="lb-chart"></canvas>
                    </div>
                    <div id="lb-explanation" class="mt-4 text-center text-slate-600">é€‰æ‹©ä¸€ç§ç®—æ³•å¼€å§‹æ¨¡æ‹Ÿã€‚</div>
                </div>

                 <h3 class="text-2xl font-semibold mt-10 mb-4">Upstream é…ç½®ç¤ºä¾‹</h3>
                 <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="code-block" id="code-lb-example">
                         <button class="copy-btn" onclick="copyToClipboard('code-lb-example')">å¤åˆ¶</button>
                        <pre><code>http {
    upstream my_backend {
        # least_conn; # æˆ–è€… ip_hash;
        server backend1.example.com weight=3;
        server backend2.example.com;
        server backend3.example.com backup;
    }

    server {
        location / {
            proxy_pass http://my_backend;
        }
    }
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Section: Performance -->
            <section id="performance" class="content-section">
                <h1 class="text-4xl font-bold text-slate-900">æ€§èƒ½ä¼˜åŒ–</h1>
                <p class="mt-4 text-lg text-slate-600">é€šè¿‡è°ƒæ•´ Worker è¿›ç¨‹å’Œè¿æ¥å¤„ç†å‚æ•°ï¼Œå¯ä»¥æ˜¾è‘—æå‡ Nginx åœ¨é«˜è´Ÿè½½ä¸‹çš„è¡¨ç°ã€‚</p>

                <div class="mt-8 grid md:grid-cols-2 gap-8">
                     <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-2xl font-semibold mb-4">Worker é…ç½®</h3>
                        <p class="mb-4">`worker_processes` é€šå¸¸åº”è®¾ç½®ä¸ºæœåŠ¡å™¨çš„CPUæ ¸å¿ƒæ•°ï¼Œä»¥å……åˆ†åˆ©ç”¨ç¡¬ä»¶èµ„æºå¹¶å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p>
                         <div class="code-block" id="code-perf-worker">
                             <button class="copy-btn" onclick="copyToClipboard('code-perf-worker')">å¤åˆ¶</button>
                            <pre><code># é€šå¸¸åœ¨ nginx.conf çš„é¡¶å±‚
worker_processes auto;</code></pre>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-2xl font-semibold mb-4">è¿æ¥æ•°è®¡ç®—å™¨</h3>
                        <p class="mb-4">æœåŠ¡å™¨æœ€å¤§è¿æ¥æ•°çº¦ç­‰äº `worker_processes` Ã— `worker_connections`ã€‚å°è¯•è°ƒæ•´ä¸‹æ–¹å‚æ•°ï¼ŒæŸ¥çœ‹ç†è®ºæœ€å¤§å€¼ã€‚</p>
                        <div class="space-y-3">
                            <div>
                                <label for="worker_processes_input" class="font-medium">Worker Processes:</label>
                                <input type="number" id="worker_processes_input" value="4" class="w-full mt-1 p-2 border rounded-md">
                            </div>
                            <div>
                                <label for="worker_connections_input" class="font-medium">Worker Connections:</label>
                                <input type="number" id="worker_connections_input" value="1024" class="w-full mt-1 p-2 border rounded-md">
                            </div>
                            <div class="text-lg font-semibold">
                                ç†è®ºæœ€å¤§è¿æ¥æ•°: <span id="max_clients_output" class="text-teal-600">4096</span>
                            </div>
                        </div>
                    </div>
                </div>
                 <h3 class="text-2xl font-semibold mt-10 mb-4">å¯ç”¨ Gzip å‹ç¼©</h3>
                 <p class="mb-4">å‹ç¼©å“åº”ä½“å¯ä»¥æ˜¾è‘—å‡å°‘ä¼ è¾“æ•°æ®é‡ï¼ŒåŠ å¿«å®¢æˆ·ç«¯åŠ è½½é€Ÿåº¦ã€‚è¿™æ˜¯æœ€åŸºæœ¬ä¹Ÿæ˜¯æœ€æœ‰æ•ˆçš„ä¼˜åŒ–æ‰‹æ®µä¹‹ä¸€ã€‚</p>
                 <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="code-block" id="code-perf-gzip">
                         <button class="copy-btn" onclick="copyToClipboard('code-perf-gzip')">å¤åˆ¶</button>
                        <pre><code># åœ¨ http å—ä¸­æ·»åŠ 
gzip on;
gzip_vary on;
gzip_proxied any;
gzip_comp_level 6;
gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;</code></pre>
                    </div>
                 </div>
            </section>
            
            <!-- Section: Security -->
            <section id="security" class="content-section">
                <h1 class="text-4xl font-bold text-slate-900">å®‰å…¨åŠ å›º</h1>
                <p class="mt-4 text-lg text-slate-600">é…ç½® Nginx ä»¥å¢å¼º Web åº”ç”¨çš„å®‰å…¨æ€§ï¼Œé˜²æ­¢å¸¸è§æ”»å‡»ã€‚</p>

                <div class="mt-8 grid md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-2xl font-semibold mb-4">é…ç½® SSL/TLS (HTTPS)</h3>
                        <p class="mb-4">ä¸ºæ‚¨çš„ç«™ç‚¹å¯ç”¨ HTTPS æ˜¯å®‰å…¨çš„åŸºç¡€ã€‚ä½¿ç”¨å¼ºåŠ å¯†åè®®å’Œå¥—ä»¶ï¼Œå¹¶è‡ªåŠ¨å°† HTTP é‡å®šå‘åˆ° HTTPSã€‚</p>
                        <div class="code-block" id="code-sec-ssl">
                             <button class="copy-btn" onclick="copyToClipboard('code-sec-ssl')">å¤åˆ¶</button>
                            <pre><code>server {
    listen 80;
    server_name example.com;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl http2;
    server_name example.com;

    ssl_certificate /path/to/fullchain.pem;
    ssl_certificate_key /path/to/privkey.pem;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers on;
}</code></pre>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-2xl font-semibold mb-4">é™åˆ¶è¯·æ±‚é€Ÿç‡</h3>
                        <p class="mb-4">ä½¿ç”¨ `limit_req_zone` å’Œ `limit_req` æŒ‡ä»¤å¯ä»¥é˜²æ­¢æš´åŠ›ç ´è§£å’Œ DoS æ”»å‡»ã€‚</p>
                        <div class="code-block" id="code-sec-limit">
                             <button class="copy-btn" onclick="copyToClipboard('code-sec-limit')">å¤åˆ¶</button>
                            <pre><code># åœ¨ http å—ä¸­
limit_req_zone $binary_remote_addr zone=mylimit:10m rate=10r/s;

# åœ¨ server æˆ– location å—ä¸­
location /login {
    limit_req zone=mylimit burst=20 nodelay;
    # ... proxy_pass ...
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Section: Caching -->
            <section id="caching" class="content-section">
                <h1 class="text-4xl font-bold text-slate-900">å†…å®¹ç¼“å­˜</h1>
                <p class="mt-4 text-lg text-slate-600">Nginx å¯ä»¥ç¼“å­˜æ¥è‡ªåç«¯æœåŠ¡å™¨çš„å“åº”ï¼Œæå¤§åœ°æå‡æ€§èƒ½å¹¶é™ä½åç«¯è´Ÿè½½ã€‚è¿™å¯¹äºä¸ç»å¸¸å˜åŒ–çš„åŠ¨æ€å†…å®¹æˆ–é™æ€APIå“åº”å°¤å…¶æœ‰æ•ˆã€‚</p>
                
                <h3 class="text-2xl font-semibold mt-10 mb-4">é…ç½®ç¼“å­˜è·¯å¾„å’ŒåŒºåŸŸ</h3>
                <p class="mb-4">é¦–å…ˆï¼Œéœ€è¦åœ¨ `http` å—ä¸­ä½¿ç”¨ `proxy_cache_path` å®šä¹‰ä¸€ä¸ªç¼“å­˜åŒºåŸŸã€‚</p>
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="code-block" id="code-cache-path">
                         <button class="copy-btn" onclick="copyToClipboard('code-cache-path')">å¤åˆ¶</button>
                        <pre><code># åœ¨ http å—ä¸­
proxy_cache_path /var/cache/nginx/my_cache levels=1:2 keys_zone=my_cache_zone:10m max_size=10g inactive=60m use_temp_path=off;</code></pre>
                    </div>
                     <ul class="mt-4 list-disc list-inside space-y-2 text-slate-700">
                        <li><code>/var/cache/nginx/my_cache</code>: ç¼“å­˜æ–‡ä»¶åœ¨ç£ç›˜ä¸Šçš„å­˜å‚¨è·¯å¾„ã€‚</li>
                        <li><code>levels=1:2</code>: ç¼“å­˜ç›®å½•çš„å±‚çº§ç»“æ„ï¼Œæœ‰åŠ©äºæå‡æŸ¥æ‰¾æ•ˆç‡ã€‚</li>
                        <li><code>keys_zone=my_cache_zone:10m</code>: åœ¨å…±äº«å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªåä¸º `my_cache_zone` çš„åŒºåŸŸï¼Œå¤§å°ä¸º 10MBï¼Œç”¨äºå­˜å‚¨ç¼“å­˜é”®å’Œå…ƒæ•°æ®ã€‚</li>
                        <li><code>max_size=10g</code>: ç¼“å­˜æ€»å¤§å°çš„ä¸Šé™ã€‚</li>
                        <li><code>inactive=60m</code>: å¦‚æœç¼“å­˜åœ¨ 60 åˆ†é’Ÿå†…æœªè¢«è®¿é—®ï¼Œåˆ™å°†å…¶ä»ç¼“å­˜ä¸­åˆ é™¤ã€‚</li>
                    </ul>
                </div>

                <h3 class="text-2xl font-semibold mt-10 mb-4">åœ¨ Location ä¸­å¯ç”¨ç¼“å­˜</h3>
                <p class="mb-4">åœ¨éœ€è¦ç¼“å­˜çš„ `location` å—ä¸­ï¼Œä½¿ç”¨ `proxy_cache` æŒ‡ä»¤å¼•ç”¨ä¹‹å‰å®šä¹‰çš„ç¼“å­˜åŒºåŸŸã€‚</p>
                 <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="code-block" id="code-cache-enable">
                         <button class="copy-btn" onclick="copyToClipboard('code-cache-enable')">å¤åˆ¶</button>
                        <pre><code>location /api/data/ {
    proxy_pass http://backend_api;
    proxy_cache my_cache_zone; # å¯ç”¨åä¸º my_cache_zone çš„ç¼“å­˜
    proxy_cache_valid 200 302 10m; # å¯¹ 200 å’Œ 302 å“åº”ç¼“å­˜ 10 åˆ†é’Ÿ
    proxy_cache_valid 404 1m;      # å¯¹ 404 å“åº”ç¼“å­˜ 1 åˆ†é’Ÿ
    proxy_cache_key "$scheme$request_method$host$request_uri"; # å®šä¹‰ç¼“å­˜é”®
    
    # åœ¨å“åº”å¤´ä¸­æ·»åŠ ç¼“å­˜çŠ¶æ€ï¼Œä¾¿äºè°ƒè¯•
    add_header X-Proxy-Cache $upstream_cache_status;
}</code></pre>
                    </div>
                    <p class="mt-4 text-slate-600">å“åº”å¤´ä¸­çš„ `X-Proxy-Cache` å°†æ˜¾ç¤º `HIT` (å‘½ä¸­ç¼“å­˜)ã€`MISS` (æœªå‘½ä¸­)ã€`EXPIRED` (ç¼“å­˜è¿‡æœŸ)ç­‰çŠ¶æ€ï¼Œéå¸¸æœ‰åŠ©äºè°ƒè¯•ã€‚</p>
                </div>
            </section>
            
            <!-- Section: Rewriting -->
            <section id="rewriting" class="content-section">
                <h1 class="text-4xl font-bold text-slate-900">URL é‡å†™</h1>
                <p class="mt-4 text-lg text-slate-600">Nginx çš„ `ngx_http_rewrite_module` æ¨¡å—å…è®¸æ‚¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¿®æ”¹è¯·æ±‚ URIï¼Œå®ç° URL æ¸…ç†ã€é‡å®šå‘æˆ–å†…éƒ¨è·¯ç”±ã€‚</p>
                
                <h3 class="text-2xl font-semibold mt-10 mb-4">`rewrite` æŒ‡ä»¤</h3>
                <p class="mb-4">`rewrite` æ˜¯æ ¸å¿ƒæŒ‡ä»¤ï¼Œè¯­æ³•ä¸ºï¼š`rewrite regex replacement [flag];`</p>
                
                 <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h4 class="font-semibold text-lg mb-2">æŒ‡ä»¤å‚æ•°</h4>
                    <ul class="list-disc list-inside space-y-2 text-slate-700">
                        <li><code>regex</code>: ç”¨äºåŒ¹é…è¯·æ±‚ URI çš„ PCRE æ­£åˆ™è¡¨è¾¾å¼ã€‚</li>
                        <li><code>replacement</code>: å¦‚æœæ­£åˆ™åŒ¹é…æˆåŠŸï¼Œç”¨äºæ›¿æ¢ URI çš„å­—ç¬¦ä¸²ã€‚å¯ä»¥åŒ…å«æ­£åˆ™è¡¨è¾¾å¼çš„æ•è·ç»„ï¼ˆå¦‚ `$1`, `$2`ï¼‰ã€‚</li>
                        <li><code>flag</code>: (å¯é€‰) æ§åˆ¶é‡å†™è¡Œä¸ºçš„æ ‡å¿—ã€‚</li>
                    </ul>
                    <h4 class="font-semibold text-lg mt-6 mb-2">é‡å†™æ ‡å¿— (Flags)</h4>
                     <ul class="list-disc list-inside space-y-2 text-slate-700">
                        <li><code>last</code>: åœæ­¢å¤„ç†å½“å‰ `rewrite` æ¨¡å—çš„æŒ‡ä»¤é›†ï¼Œå¹¶ä½¿ç”¨é‡å†™åçš„ URI å¼€å§‹æ–°ä¸€è½®çš„ `location` åŒ¹é…ã€‚</li>
                        <li><code>break</code>: åœæ­¢å¤„ç†å½“å‰ `rewrite` æ¨¡å—çš„æŒ‡ä»¤é›†ï¼Œåƒ `break` åœ¨ `server` å—ä¸­ä¸€æ ·ï¼Œä½†é‡å†™åçš„ URI ä¸ä¼šé‡æ–°åŒ¹é… `location`ã€‚</li>
                        <li><code>redirect</code>: è¿”å›ä¸€ä¸ª 302 ä¸´æ—¶é‡å®šå‘ã€‚</li>
                        <li><code>permanent</code>: è¿”å›ä¸€ä¸ª 301 æ°¸ä¹…é‡å®šå‘ã€‚</li>
                    </ul>
                </div>

                <h3 class="text-2xl font-semibold mt-10 mb-4">é‡å†™ç¤ºä¾‹</h3>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h4 class="font-semibold text-lg mb-2">å°†æ—§ API è·¯å¾„é‡å†™ä¸ºæ–°è·¯å¾„</h4>
                        <div class="code-block" id="code-rewrite-api">
                            <button class="copy-btn" onclick="copyToClipboard('code-rewrite-api')">å¤åˆ¶</button>
                            <pre><code># /users/123 -> /api/v1/users/123
rewrite ^/users/(.*)$ /api/v1/users/$1 last;</code></pre>
                        </div>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h4 class="font-semibold text-lg mb-2">HTTP åˆ° HTTPS çš„æ°¸ä¹…é‡å®šå‘</h4>
                        <div class="code-block" id="code-rewrite-https">
                            <button class="copy-btn" onclick="copyToClipboard('code-rewrite-https')">å¤åˆ¶</button>
                            <pre><code>server {
    listen 80;
    server_name example.com;
    # è™½ç„¶ return æ›´å¥½ï¼Œä½† rewrite ä¹Ÿèƒ½å®ç°
    rewrite ^ https://$host$request_uri? permanent;
}</code></pre>
                        </div>
                    </div>
                </div>
                 <p class="mt-8 text-slate-600">**æœ€ä½³å®è·µ**: å°½å¯èƒ½ä½¿ç”¨ `return` æŒ‡ä»¤è¿›è¡Œç®€å•çš„é‡å®šå‘ï¼Œå› ä¸ºå®ƒæ›´é«˜æ•ˆã€‚å¯¹äºéœ€è¦æ•è·å’Œé‡ç»„ URI çš„å¤æ‚é€»è¾‘ï¼Œ`rewrite` æ˜¯ä¸äºŒä¹‹é€‰ã€‚é¿å…åœ¨ `if` æŒ‡ä»¤ä¸­ä½¿ç”¨ `rewrite`ï¼Œå› ä¸ºè¿™å¯èƒ½å¯¼è‡´ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚</p>
            </section>
            
            <!-- Section: Troubleshooting -->
            <section id="troubleshooting" class="content-section">
                <h1 class="text-4xl font-bold text-slate-900">å¸¸è§é”™è¯¯æ’æŸ¥</h1>
                <p class="mt-4 text-lg text-slate-600">å½“ Nginx é‡åˆ°é—®é¢˜æ—¶ï¼Œå®ƒä¼šè¿”å›ç‰¹å®šçš„ HTTP çŠ¶æ€ç ã€‚ç†è§£è¿™äº›é”™è¯¯çš„å«ä¹‰æ˜¯å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜çš„å…³é”®ã€‚</p>
                
                <div class="mt-10 space-y-8">
                    <div class="troubleshooting-card border-red-500">
                        <h2 class="text-3xl font-bold text-red-700">502 Bad Gateway</h2>
                        <p class="mt-2 mb-4 text-slate-600">**å«ä¹‰**: Nginx ä½œä¸ºä»£ç†ï¼Œä»åç«¯æœåŠ¡å™¨æ”¶åˆ°äº†ä¸€ä¸ªæ— æ•ˆçš„å“åº”ã€‚</p>
                        <h4 class="font-semibold text-lg mb-2">å¸¸è§åŸå› ä¸è§£å†³æ–¹æ¡ˆ</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li>**åç«¯æœåŠ¡æœªè¿è¡Œæˆ–å´©æºƒ**: ç¡®ä¿æ‚¨çš„åº”ç”¨æœåŠ¡å™¨ï¼ˆå¦‚ Node.js, PHP-FPM, uWSGIï¼‰æ­£åœ¨è¿è¡Œã€‚æ£€æŸ¥å…¶æ—¥å¿—æ–‡ä»¶ä»¥å¯»æ‰¾é”™è¯¯ã€‚</li>
                            <li>**Nginx é…ç½®é”™è¯¯**: æ£€æŸ¥ `proxy_pass` æŒ‡ä»¤ä¸­çš„åœ°å€å’Œç«¯å£æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ Nginx å¯ä»¥è®¿é—®åˆ°åç«¯æœåŠ¡ã€‚</li>
                            <li>**é˜²ç«å¢™æˆ–ç½‘ç»œé—®é¢˜**: ç¡®ä¿ Nginx æœåŠ¡å™¨å’Œåç«¯æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œæ˜¯é€šçš„ï¼Œæ²¡æœ‰é˜²ç«å¢™è§„åˆ™é˜»æ­¢å®ƒä»¬é€šä¿¡ã€‚</li>
                            <li>**åç«¯æœåŠ¡è¿‡è½½**: å¦‚æœåç«¯æœåŠ¡å› è¯·æ±‚è¿‡å¤šè€Œæ— å“åº”ï¼Œå¯èƒ½ä¼šå¯¼è‡´ 502ã€‚è€ƒè™‘ä¼˜åŒ–åç«¯æˆ–å¢åŠ æœåŠ¡å™¨æ•°é‡ã€‚</li>
                        </ul>
                    </div>

                     <div class="troubleshooting-card border-amber-500">
                        <h2 class="text-3xl font-bold text-amber-700">504 Gateway Timeout</h2>
                        <p class="mt-2 mb-4 text-slate-600">**å«ä¹‰**: Nginx ä½œä¸ºä»£ç†ï¼Œåœ¨ç­‰å¾…åç«¯æœåŠ¡å™¨å“åº”æ—¶è¶…æ—¶ã€‚</p>
                        <h4 class="font-semibold text-lg mb-2">å¸¸è§åŸå› ä¸è§£å†³æ–¹æ¡ˆ</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li>**åç«¯å¤„ç†æ—¶é—´è¿‡é•¿**: åç«¯åº”ç”¨æ‰§è¡Œä¸€ä¸ªè€—æ—¶æ“ä½œï¼ˆå¦‚å¤æ‚çš„æ•°æ®åº“æŸ¥è¯¢æˆ–å¤§æ–‡ä»¶å¤„ç†ï¼‰è¶…è¿‡äº† Nginx çš„è¶…æ—¶è®¾ç½®ã€‚
                                <div class="code-block mt-2 text-sm" id="code-ts-504">
                                    <button class="copy-btn" onclick="copyToClipboard('code-ts-504')">å¤åˆ¶</button>
                                    <pre><code># å¢åŠ è¶…æ—¶æ—¶é—´
proxy_read_timeout 300s;
proxy_connect_timeout 300s;
proxy_send_timeout 300s;</code></pre>
                                </div>
                            </li>
                            <li>**ç½‘ç»œå»¶è¿Ÿ**: Nginx ä¸åç«¯æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œè¿æ¥ç¼“æ…¢æˆ–ä¸ç¨³å®šã€‚</li>
                            <li>**åç«¯æœåŠ¡è´Ÿè½½é«˜**: ä¸ 502 ç±»ä¼¼ï¼Œåç«¯æœåŠ¡è¿‡è½½ä¹Ÿå¯èƒ½å¯¼è‡´å“åº”ç¼“æ…¢ï¼Œæœ€ç»ˆè¶…æ—¶ã€‚</li>
                        </ul>
                    </div>

                    <div class="troubleshooting-card border-sky-500">
                        <h2 class="text-3xl font-bold text-sky-700">413 Content Too Large</h2>
                        <p class="mt-2 mb-4 text-slate-600">**å«ä¹‰**: å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ä½“ï¼ˆå¦‚æ–‡ä»¶ä¸Šä¼ ï¼‰çš„å¤§å°è¶…è¿‡äº† Nginx é…ç½®çš„ä¸Šé™ã€‚</p>
                        <h4 class="font-semibold text-lg mb-2">è§£å†³æ–¹æ¡ˆ</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li>åœ¨ `http`, `server`, æˆ– `location` å—ä¸­å¢åŠ  `client_max_body_size` çš„å€¼ã€‚
                                 <div class="code-block mt-2 text-sm" id="code-ts-413">
                                    <button class="copy-btn" onclick="copyToClipboard('code-ts-413')">å¤åˆ¶</button>
                                    <pre><code># å…è®¸æœ€å¤§ 100MB çš„è¯·æ±‚ä½“
client_max_body_size 100M;</code></pre>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section: Cheatsheet -->
            <section id="cheatsheet" class="content-section">
                 <h1 class="text-4xl font-bold text-slate-900">å¸¸ç”¨æŒ‡ä»¤é€ŸæŸ¥</h1>
                <p class="mt-4 text-lg text-slate-600">ä¸€ä»½å¿«é€Ÿå‚è€ƒï¼Œæ¶µç›–äº†é…ç½® Nginx æ—¶æœ€å¸¸ç”¨çš„ä¸€äº›æŒ‡ä»¤å’Œå˜é‡ã€‚</p>
                 <div class="mt-8 bg-white p-6 rounded-lg shadow-sm">
                    <div class="grid md:grid-cols-2 gap-x-8 gap-y-6">
                        <div>
                            <h4 class="font-semibold text-lg text-teal-700">æ ¸å¿ƒæŒ‡ä»¤</h4>
                            <ul class="mt-2 space-y-1 list-disc list-inside">
                                <li><code>server { ... }</code>: å®šä¹‰è™šæ‹Ÿä¸»æœºã€‚</li>
                                <li><code>location [modifier] /uri/ { ... }</code>: å®šä¹‰URIè·¯ç”±ã€‚</li>
                                <li><code>listen &lt;port&gt;;</code>: ç›‘å¬ç«¯å£ã€‚</li>
                                <li><code>server_name &lt;name&gt;;</code>: å®šä¹‰ä¸»æœºåã€‚</li>
                                <li><code>root &lt;path&gt;;</code>: è®¾ç½®æ–‡æ¡£æ ¹ç›®å½•ã€‚</li>
                                <li><code>index &lt;file&gt;;</code>: è®¾ç½®ç´¢å¼•æ–‡ä»¶ã€‚</li>
                                <li><code>try_files &lt;file...&gt; &lt;uri&gt;;</code>: æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</li>
                                <li><code>proxy_pass &lt;url&gt;;</code>: ä»£ç†è¯·æ±‚ã€‚</li>
                                <li><code>upstream &lt;name&gt; { ... }</code>: å®šä¹‰åç«¯æœåŠ¡å™¨æ± ã€‚</li>
                                <li><code>return &lt;code&gt; [text|URL];</code>: è¿”å›å“åº”æˆ–é‡å®šå‘ã€‚</li>
                                <li><code>rewrite &lt;regex&gt; &lt;replacement&gt; [flag];</code>: é‡å†™URLã€‚</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-teal-700">å¸¸ç”¨å˜é‡</h4>
                            <ul class="mt-2 space-y-1 list-disc list-inside">
                                <li><code>$host</code>: è¯·æ±‚çš„ä¸»æœºåã€‚</li>
                                <li><code>$uri</code>: å½“å‰è¯·æ±‚çš„URI (ä¸å¸¦å‚æ•°)ã€‚</li>
                                <li><code>$request_uri</code>: åŸå§‹è¯·æ±‚çš„å®Œæ•´URI (å¸¦å‚æ•°)ã€‚</li>
                                <li><code>$args</code> / <code>$query_string</code>: è¯·æ±‚å‚æ•°ã€‚</li>
                                <li><code>$remote_addr</code>: å®¢æˆ·ç«¯IPåœ°å€ã€‚</li>
                                <li><code>$scheme</code>: è¯·æ±‚åè®® (http/https)ã€‚</li>
                                <li><code>$request_method</code>: è¯·æ±‚æ–¹æ³• (GET, POST)ã€‚</li>
                                <li><code>$document_root</code>: å½“å‰è¯·æ±‚çš„æ ¹ç›®å½•ã€‚</li>
                                <li><code>$request_filename</code>: æ˜ å°„åˆ°çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ã€‚</li>
                                <li><code>$http_&lt;header&gt;</code>: è·å–è¯·æ±‚å¤´ï¼Œå¦‚ <code>$http_user_agent</code>ã€‚</li>
                            </ul>
                        </div>
                    </div>
                 </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Navigation
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');

            function switchPage(hash) {
                hash = hash || window.location.hash || '#intro';
                
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === hash) {
                        link.classList.add('active');
                    }
                });

                contentSections.forEach(section => {
                    section.classList.remove('active');
                    if ('#' + section.id === hash) {
                        section.classList.add('active');
                    }
                });
                document.querySelector('main').scrollTop = 0;
            }

            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (window.location.hash !== targetId) {
                        history.pushState({path: targetId}, '', targetId);
                        switchPage(targetId);
                    }
                });
            });

            window.addEventListener('popstate', (e) => switchPage(e.state ? e.state.path : window.location.hash));
            switchPage(window.location.hash);


            // Installation Tabs
            const installTabs = document.querySelector('#install-tabs');
            if (installTabs) {
                const tabs = installTabs.querySelectorAll('.tab');
                const tabContents = document.querySelectorAll('#install .tab-content');
                
                tabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        tabs.forEach(t => t.classList.remove('active'));
                        this.classList.add('active');

                        tabContents.forEach(content => content.classList.remove('active'));
                        document.getElementById(this.dataset.target).classList.add('active');
                    });
                });
            }

            // Config Structure Diagram
            const diagramBlocks = document.querySelectorAll('#config-diagram .diagram-clickable');
            const configInfos = document.querySelectorAll('.config-info');

            diagramBlocks.forEach(block => {
                block.addEventListener('click', function() {
                    const targetId = this.dataset.target + '-info';
                    diagramBlocks.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');

                    configInfos.forEach(info => info.classList.add('hidden'));
                    const targetInfo = document.getElementById(targetId);
                    if (targetInfo) {
                       targetInfo.classList.remove('hidden');
                    }
                });
            });
            document.querySelector('#config-diagram .diagram-clickable[data-target="http-context"]').click();

            // Load Balancer Chart
            let lbChart;
            const lbChartCanvas = document.getElementById('lb-chart');
            if (lbChartCanvas) {
                const ctx = lbChartCanvas.getContext('2d');
                const chartData = {
                    labels: ['Server 1 (w:3)', 'Server 2 (w:1)', 'Server 3 (w:1)'],
                    datasets: [{
                        label: 'æ”¶åˆ°çš„è¯·æ±‚æ•°',
                        data: [0, 0, 0],
                        backgroundColor: ['#14b8a6', '#38bdf8', '#818cf8'],
                        borderColor: ['#0f766e', '#0ea5e9', '#6366f1'],
                        borderWidth: 1
                    }]
                };
                lbChart = new Chart(ctx, {
                    type: 'bar',
                    data: chartData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    stepSize: 1
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: 'è´Ÿè½½å‡è¡¡ç®—æ³•æ¨¡æ‹Ÿ'
                            }
                        }
                    }
                });

                const lbExplanation = document.getElementById('lb-explanation');
                let simulationInterval;
                
                function resetChart(explanation) {
                    clearInterval(simulationInterval);
                    lbChart.data.datasets[0].data = [0, 0, 0];
                    lbChart.update();
                    lbExplanation.textContent = explanation;
                }

                document.getElementById('btn-round-robin').addEventListener('click', () => {
                    resetChart('è½®è¯¢ (Round Robin): æŒ‰æƒé‡é¡ºåºå¾ªç¯åˆ†é…è¯·æ±‚ã€‚');
                    let currentServer = 0;
                    let counter = 0;
                    let requests = 0;
                    const weights = [3, 1, 1];
                    simulationInterval = setInterval(() => {
                        if (requests >= 10) {
                            clearInterval(simulationInterval);
                            return;
                        }
                        lbChart.data.datasets[0].data[currentServer]++;
                        lbChart.update();
                        counter++;
                        if (counter >= weights[currentServer]) {
                            counter = 0;
                            currentServer = (currentServer + 1) % 3;
                        }
                        requests++;
                    }, 500);
                });

                document.getElementById('btn-least-conn').addEventListener('click', () => {
                    resetChart('æœ€å°‘è¿æ¥ (Least Connections): å°†è¯·æ±‚åˆ†é…ç»™å½“å‰è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨ã€‚');
                    let requests = 0;
                    simulationInterval = setInterval(() => {
                        if (requests >= 10) {
                            clearInterval(simulationInterval);
                            return;
                        }
                        const data = lbChart.data.datasets[0].data;
                        const minConnections = Math.min(...data);
                        const targetServer = data.indexOf(minConnections);
                        data[targetServer]++;
                        lbChart.update();
                        requests++;
                    }, 500);
                });

                document.getElementById('btn-ip-hash').addEventListener('click', () => {
                    resetChart('IP å“ˆå¸Œ (IP Hash): æ¥è‡ªåŒä¸€IPçš„è¯·æ±‚å§‹ç»ˆåˆ†é…ç»™åŒä¸€æœåŠ¡å™¨ã€‚');
                    let requests = 0;
                    const ips = ['1.1.1.1', '2.2.2.2', '1.1.1.1', '3.3.3.3', '2.2.2.2', '1.1.1.1', '4.4.4.4', '2.2.2.2', '3.3.3.3', '1.1.1.1'];
                    simulationInterval = setInterval(() => {
                         if (requests >= 10) {
                            clearInterval(simulationInterval);
                            return;
                        }
                        const ip = ips[requests];
                        const targetServer = (ip.charCodeAt(ip.length-1)) % 3;
                        lbChart.data.datasets[0].data[targetServer]++;
                        lbChart.update();
                        requests++;
                    }, 500);
                });
            }

            // Performance Calculator
            const workerProcessesInput = document.getElementById('worker_processes_input');
            const workerConnectionsInput = document.getElementById('worker_connections_input');
            const maxClientsOutput = document.getElementById('max_clients_output');

            function calculateMaxClients() {
                const processes = parseInt(workerProcessesInput.value, 10) || 0;
                const connections = parseInt(workerConnectionsInput.value, 10) || 0;
                maxClientsOutput.textContent = (processes * connections).toLocaleString();
            }

            if(workerProcessesInput && workerConnectionsInput) {
                workerProcessesInput.addEventListener('input', calculateMaxClients);
                workerConnectionsInput.addEventListener('input', calculateMaxClients);
            }

        });
        
        // Clipboard function
        function copyToClipboard(elementId) {
            const block = document.getElementById(elementId);
            const code = block.querySelector('pre code').innerText;
            const el = document.createElement('textarea');
            el.value = code;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);

            const button = block.querySelector('.copy-btn');
            const originalText = button.innerText;
            button.innerText = 'å·²å¤åˆ¶!';
            setTimeout(() => {
                button.innerText = originalText;
            }, 2000);
        }
    </script>
</body>
</html>
